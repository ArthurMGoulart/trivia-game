{"ast":null,"code":"import _defineProperty from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import{validLogin,fetchToken}from'../redux/actions';import'./login.css';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this));_this.state={email:'',name:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleClickPlay=_this.handleClickPlay.bind(_assertThisInitialized(_this));_this.renderForm=_this.renderForm.bind(_assertThisInitialized(_this));_this.handleClickConfig=_this.handleClickConfig.bind(_assertThisInitialized(_this));_this.setEmailAndName=_this.setEmailAndName.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){this.setEmailAndName();}},{key:\"setEmailAndName\",value:function setEmailAndName(){var _this$props=this.props,name=_this$props.name,email=_this$props.email;this.setState({email:email,name:name});}},{key:\"handleClickPlay\",value:function handleClickPlay(event){var _this$props2,history,dispatchValidLogin,dispatchfetchToken,token,_this$state,email,name;return _regeneratorRuntime.async(function handleClickPlay$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this$props2=this.props,history=_this$props2.history,dispatchValidLogin=_this$props2.dispatchValidLogin,dispatchfetchToken=_this$props2.dispatchfetchToken,token=_this$props2.token;_this$state=this.state,email=_this$state.email,name=_this$state.name;_context.next=5;return _regeneratorRuntime.awrap(dispatchfetchToken());case 5:localStorage.setItem('token',token);dispatchValidLogin(name,email);history.push('/jogo');case 8:case\"end\":return _context.stop();}}},null,this);}},{key:\"handleClickConfig\",value:function handleClickConfig(event){var _this$props3,history,dispatchValidLogin,_this$state2,email,name;return _regeneratorRuntime.async(function handleClickConfig$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this$props3=this.props,history=_this$props3.history,dispatchValidLogin=_this$props3.dispatchValidLogin;_this$state2=this.state,email=_this$state2.email,name=_this$state2.name;// await dispatchfetchToken();\n// localStorage.setItem('token', token);\ndispatchValidLogin(name,email);history.push('/configuracoes');case 5:case\"end\":return _context2.stop();}}},null,this);}},{key:\"handleChange\",value:function handleChange(_ref){var target=_ref.target;var name=target.name,value=target.value;this.setState(_defineProperty({},name,value));}},{key:\"renderEmailInput\",value:function renderEmailInput(){var email=this.state.email;return React.createElement(\"label\",{className:\"form-label text-start mb-3 text-white fw-bold\",htmlFor:\"email\"},\"Email do Gravatar\",React.createElement(\"input\",{className:\"form-control input removeMargin\",type:\"email\",name:\"email\",id:\"email\",value:email,\"data-testid\":\"input-gravatar-email\",onChange:this.handleChange}));}},{key:\"renderNameInput\",value:function renderNameInput(){var name=this.state.name;return React.createElement(\"label\",{className:\"form-label text-start mb-3 text-white fw-bold\",htmlFor:\"name\"},\"Nome do Jogador\",React.createElement(\"input\",{className:\"form-control input\",type:\"text\",name:\"name\",id:\"name\",value:name,\"data-testid\":\"input-player-name\",onChange:this.handleChange}));}},{key:\"renderForm\",value:function renderForm(){var _this$state3=this.state,email=_this$state3.email,name=_this$state3.name;var isDisabled=!email||!name;return React.createElement(\"form\",{className:\"d-flex flex-column justify-content-center rounded form\"},React.createElement(\"h3\",{className:\"mb-5 text-white fw-bold\"},\"TRIVIA GAME\"),this.renderEmailInput(),this.renderNameInput(),React.createElement(\"button\",{className:\"text-uppercase btn btn-play fw-bold mb-3\",type:\"submit\",disabled:isDisabled,onClick:this.handleClickPlay,\"data-testid\":\"btn-play\"},\"Vamos Jogar!\"),React.createElement(\"button\",{className:\"text-uppercase btn btn-config fw-bold mb-5\",type:\"submit\",onClick:this.handleClickConfig,\"data-testid\":\"btn-settings\"},\"Configura\\xE7\\xF5es\"),React.createElement(Link,{className:\"devs d-flex btn justify-content-center align-items-center\",to:\"/devs\"},React.createElement(\"span\",{className:\"header-devs text-uppercase fw-bold\"},\"Devs\")));}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"text-center\"},this.renderForm());}}]);return Login;}(React.Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{dispatchValidLogin:function dispatchValidLogin(name,email){return dispatch(validLogin(name,email));},dispatchfetchToken:function dispatchfetchToken(){return dispatch(fetchToken());}};};var mapStateToProps=function mapStateToProps(state){return{email:state.game.player.gravatarEmail,name:state.game.player.name,token:state.game.token};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/budi/Documents/Trybe_Conteudos/trivia-game/trivia-game/src/pages/Login.js"],"names":["React","connect","Link","validLogin","fetchToken","Login","state","email","name","handleChange","bind","handleClickPlay","renderForm","handleClickConfig","setEmailAndName","props","setState","event","preventDefault","history","dispatchValidLogin","dispatchfetchToken","token","localStorage","setItem","push","target","value","isDisabled","renderEmailInput","renderNameInput","Component","mapDispatchToProps","dispatch","mapStateToProps","game","player","gravatarEmail"],"mappings":"+6CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,UAAT,CAAqBC,UAArB,KAAuC,kBAAvC,CACA,MAAO,aAAP,C,GAEMC,CAAAA,K,2EACJ,gBAAc,uCACZ,yEAEA,MAAKC,KAAL,CAAa,CACXC,KAAK,CAAE,EADI,CAEXC,IAAI,CAAE,EAFK,CAAb,CAKA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CACA,MAAKC,eAAL,CAAuB,MAAKA,eAAL,CAAqBD,IAArB,+BAAvB,CACA,MAAKE,UAAL,CAAkB,MAAKA,UAAL,CAAgBF,IAAhB,+BAAlB,CACA,MAAKG,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBH,IAAvB,+BAAzB,CACA,MAAKI,eAAL,CAAuB,MAAKA,eAAL,CAAqBJ,IAArB,+BAAvB,CAZY,aAab,C,+EAEmB,CAClB,KAAKI,eAAL,GACD,C,yDAEiB,iBACQ,KAAKC,KADb,CACRP,IADQ,aACRA,IADQ,CACFD,KADE,aACFA,KADE,CAEhB,KAAKS,QAAL,CAAc,CACZT,KAAK,CAALA,KADY,CAEZC,IAAI,CAAJA,IAFY,CAAd,EAID,C,wDAEqBS,K,uNACpBA,KAAK,CAACC,cAAN,G,aACmE,KAAKH,K,CAAhEI,O,cAAAA,O,CAASC,kB,cAAAA,kB,CAAoBC,kB,cAAAA,kB,CAAoBC,K,cAAAA,K,aACjC,KAAKhB,K,CAArBC,K,aAAAA,K,CAAOC,I,aAAAA,I,kDACTa,kBAAkB,E,SACxBE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACAF,kBAAkB,CAACZ,IAAD,CAAOD,KAAP,CAAlB,CACAY,OAAO,CAACM,IAAR,CAAa,OAAb,E,oHAGsBR,K,oMACtBA,KAAK,CAACC,cAAN,G,aACwC,KAAKH,K,CAArCI,O,cAAAA,O,CAASC,kB,cAAAA,kB,cACO,KAAKd,K,CAArBC,K,cAAAA,K,CAAOC,I,cAAAA,I,CACf;AACA;AACAY,kBAAkB,CAACZ,IAAD,CAAOD,KAAP,CAAlB,CACAY,OAAO,CAACM,IAAR,CAAa,gBAAb,E,gHAGuB,IAAVC,CAAAA,MAAU,MAAVA,MAAU,IACflB,CAAAA,IADe,CACCkB,MADD,CACflB,IADe,CACTmB,KADS,CACCD,MADD,CACTC,KADS,CAEvB,KAAKX,QAAL,oBAAiBR,IAAjB,CAAwBmB,KAAxB,GACD,C,2DAEkB,IACTpB,CAAAA,KADS,CACC,KAAKD,KADN,CACTC,KADS,CAEjB,MACE,8BAAO,SAAS,CAAC,+CAAjB,CAAiE,OAAO,CAAC,OAAzE,sBAEE,6BACE,SAAS,CAAC,iCADZ,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,EAAE,CAAC,OAJL,CAKE,KAAK,CAAGA,KALV,CAME,cAAY,sBANd,CAOE,QAAQ,CAAG,KAAKE,YAPlB,EAFF,CADF,CAcD,C,yDAEiB,IACRD,CAAAA,IADQ,CACC,KAAKF,KADN,CACRE,IADQ,CAEhB,MACE,8BAAO,SAAS,CAAC,+CAAjB,CAAiE,OAAO,CAAC,MAAzE,oBAEE,6BACE,SAAS,CAAC,oBADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,MAHP,CAIE,EAAE,CAAC,MAJL,CAKE,KAAK,CAAGA,IALV,CAME,cAAY,mBANd,CAOE,QAAQ,CAAG,KAAKC,YAPlB,EAFF,CADF,CAcD,C,+CAEY,kBACa,KAAKH,KADlB,CACHC,KADG,cACHA,KADG,CACIC,IADJ,cACIA,IADJ,CAEX,GAAMoB,CAAAA,UAAU,CAAG,CAACrB,KAAD,EAAU,CAACC,IAA9B,CACA,MACE,6BAAM,SAAS,CAAC,wDAAhB,EACE,0BAAI,SAAS,CAAC,yBAAd,gBADF,CAEI,KAAKqB,gBAAL,EAFJ,CAGI,KAAKC,eAAL,EAHJ,CAIE,8BACE,SAAS,CAAC,0CADZ,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAGF,UAHb,CAIE,OAAO,CAAG,KAAKjB,eAJjB,CAKE,cAAY,UALd,iBAJF,CAaE,8BACE,SAAS,CAAC,4CADZ,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAG,KAAKE,iBAHjB,CAIE,cAAY,cAJd,wBAbF,CAqBE,oBAAC,IAAD,EACE,SAAS,CAAC,2DADZ,CAGE,EAAE,CAAC,OAHL,EAKE,4BAAM,SAAS,CAAC,oCAAhB,SALF,CArBF,CADF,CA+BD,C,uCAEQ,CACP,MACE,4BAAK,SAAS,CAAC,aAAf,EACI,KAAKD,UAAL,EADJ,CADF,CAKD,C,mBAnIiBZ,KAAK,CAAC+B,S,EAiJ1B,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACxCb,kBAAkB,CAAE,4BAACZ,IAAD,CAAOD,KAAP,QAAiB0B,CAAAA,QAAQ,CAAC9B,UAAU,CAACK,IAAD,CAAOD,KAAP,CAAX,CAAzB,EADoB,CAExCc,kBAAkB,CAAE,oCAAMY,CAAAA,QAAQ,CAAC7B,UAAU,EAAX,CAAd,EAFoB,CAAf,EAA3B,CAKA,GAAM8B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAC5B,KAAD,QAAY,CAClCC,KAAK,CAAED,KAAK,CAAC6B,IAAN,CAAWC,MAAX,CAAkBC,aADS,CAElC7B,IAAI,CAAEF,KAAK,CAAC6B,IAAN,CAAWC,MAAX,CAAkB5B,IAFU,CAGlCc,KAAK,CAAEhB,KAAK,CAAC6B,IAAN,CAAWb,KAHgB,CAAZ,EAAxB,CAMA,cAAerB,CAAAA,OAAO,CAACiC,eAAD,CAAkBF,kBAAlB,CAAP,CAA6C3B,KAA7C,CAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { validLogin, fetchToken } from '../redux/actions';\nimport './login.css';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      email: '',\n      name: '',\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClickPlay = this.handleClickPlay.bind(this);\n    this.renderForm = this.renderForm.bind(this);\n    this.handleClickConfig = this.handleClickConfig.bind(this);\n    this.setEmailAndName = this.setEmailAndName.bind(this);\n  }\n\n  componentDidMount() {\n    this.setEmailAndName();\n  }\n\n  setEmailAndName() {\n    const { name, email } = this.props;\n    this.setState({\n      email,\n      name,\n    });\n  }\n\n  async handleClickPlay(event) {\n    event.preventDefault();\n    const { history, dispatchValidLogin, dispatchfetchToken, token } = this.props;\n    const { email, name } = this.state;\n    await dispatchfetchToken();\n    localStorage.setItem('token', token);\n    dispatchValidLogin(name, email);\n    history.push('/jogo');\n  }\n\n  async handleClickConfig(event) {\n    event.preventDefault();\n    const { history, dispatchValidLogin } = this.props;\n    const { email, name } = this.state;\n    // await dispatchfetchToken();\n    // localStorage.setItem('token', token);\n    dispatchValidLogin(name, email);\n    history.push('/configuracoes');\n  }\n\n  handleChange({ target }) {\n    const { name, value } = target;\n    this.setState({ [name]: value });\n  }\n\n  renderEmailInput() {\n    const { email } = this.state;\n    return (\n      <label className=\"form-label text-start mb-3 text-white fw-bold\" htmlFor=\"email\">\n        Email do Gravatar\n        <input\n          className=\"form-control input removeMargin\"\n          type=\"email\"\n          name=\"email\"\n          id=\"email\"\n          value={ email }\n          data-testid=\"input-gravatar-email\"\n          onChange={ this.handleChange }\n        />\n      </label>\n    );\n  }\n\n  renderNameInput() {\n    const { name } = this.state;\n    return (\n      <label className=\"form-label text-start mb-3 text-white fw-bold\" htmlFor=\"name\">\n        Nome do Jogador\n        <input\n          className=\"form-control input\"\n          type=\"text\"\n          name=\"name\"\n          id=\"name\"\n          value={ name }\n          data-testid=\"input-player-name\"\n          onChange={ this.handleChange }\n        />\n      </label>\n    );\n  }\n\n  renderForm() {\n    const { email, name } = this.state;\n    const isDisabled = !email || !name;\n    return (\n      <form className=\"d-flex flex-column justify-content-center rounded form\">\n        <h3 className=\"mb-5 text-white fw-bold\">TRIVIA GAME</h3>\n        { this.renderEmailInput() }\n        { this.renderNameInput() }\n        <button\n          className=\"text-uppercase btn btn-play fw-bold mb-3\"\n          type=\"submit\"\n          disabled={ isDisabled }\n          onClick={ this.handleClickPlay }\n          data-testid=\"btn-play\"\n        >\n          Vamos Jogar!\n        </button>\n        <button\n          className=\"text-uppercase btn btn-config fw-bold mb-5\"\n          type=\"submit\"\n          onClick={ this.handleClickConfig }\n          data-testid=\"btn-settings\"\n        >\n          Configurações\n        </button>\n        <Link\n          className=\"devs\n          d-flex btn justify-content-center align-items-center\"\n          to=\"/devs\"\n        >\n          <span className=\"header-devs text-uppercase fw-bold\">Devs</span>\n        </Link>\n      </form>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"text-center\">\n        { this.renderForm() }\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  email: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  dispatchValidLogin: PropTypes.func.isRequired,\n  dispatchfetchToken: PropTypes.func.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  token: PropTypes.string.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchValidLogin: (name, email) => dispatch(validLogin(name, email)),\n  dispatchfetchToken: () => dispatch(fetchToken()),\n});\n\nconst mapStateToProps = (state) => ({\n  email: state.game.player.gravatarEmail,\n  name: state.game.player.name,\n  token: state.game.token,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}